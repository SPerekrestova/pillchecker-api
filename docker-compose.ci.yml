# CI override â€” use pre-built image, no volume mounts, no nginx.
# Usage: docker compose -f docker-compose.yml -f docker-compose.ci.yml up -d api
services:
  api:
    image: pillchecker-api:ci
    entrypoint: ["/app/scripts/ci-startup.sh"]
    command: ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
    volumes: []
    environment:
      - HF_HOME=/app/models
    restart: "no"

  nginx:
    profiles:
      - disabled
